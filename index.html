<!doctype html>
<html lang="en">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VSTQ6CXJ4C"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-VSTQ6CXJ4C');
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2505573687893335"
        crossorigin="anonymous"></script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Atlas — Dashboard</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style-final.css" />

    <script async src="https://fundingchoicesmessages.google.com/i/pub-2505573687893335?ers=1"></script>
    <script>
        (function () {
            function signalGooglefcPresent() {
                if (!window.frames['googlefcPresent']) {
                    if (document.body) {
                        const iframe = document.createElement('iframe');
                        iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;';
                        iframe.style.display = 'none';
                        iframe.name = 'googlefcPresent';
                        document.body.appendChild(iframe);
                    } else {
                        setTimeout(signalGooglefcPresent, 0);
                    }
                }
            }
            signalGooglefcPresent();
        })();
    </script>
</head>

<body class="bg-gray-50 text-gray-800 antialiased">

    <header class="fixed top-0 w-full z-50 bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-14 relative">
                <a href="/" class="flex-shrink-0 flex flex-col items-start justify-center h-full">
                    <div class="flex items-center">
                        <svg class="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke-width="2" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 2a15.3 15.3 0 0110 10M2 12a15.3 15.3 0 0010 10M2 12h20" />
                            <rect x="7" y="14" width="2" height="4" rx="1" fill="currentColor" />
                            <rect x="11" y="12" width="2" height="6" rx="1" fill="currentColor" />
                            <rect x="15" y="15" width="2" height="3" rx="1" fill="currentColor" />
                        </svg>
                        <span class="font-extrabold text-xl tracking-wide text-gray-900">
                            Atlas<span class="text-indigo-600">Dashboard</span>
                        </span>
                    </div>
                </a>
                <div class="flex space-x-6 h-full">
                    <a href="/" class="flex items-center text-sm font-bold text-gray-900
                        border-b-2 border-indigo-600 transition duration-150 ease-in-out">
                        Dashboard
                    </a>
                    <a href="narrative.html" class="flex items-center text-sm font-medium text-gray-500 hover:text-gray-900
                        border-b-2 border-transparent hover:border-indigo-600 transition duration-150 ease-in-out">
                        Analysis
                    </a>
                    <a href="archive.html" class="flex items-center text-sm font-medium text-gray-500 hover:text-gray-900
                        border-b-2 border-transparent hover:border-indigo-600 transition duration-150 ease-in-out">
                        Archive
                    </a>
                </div>
                <div class="flex items-center">
                    <div id="bannerBadge" class="self-start sm:self-center">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-14">

        <div id="overallStatusCard"
            class="p-5 mb-8 rounded-xl shadow-2xl border-4 transform transition duration-500 hover:scale-[1.01] hover:shadow-2xl">
            <div class="text-center text-gray-400">Loading overall status...</div>
        </div>

        <div class="mb-8 p-5 bg-white border border-gray-200 rounded-xl shadow-sm relative" data-clamp>
            <h2 class="text-xl font-extrabold text-gray-900 mb-2">Atlas observes the global engine</h2>
          
            <!-- The content wrapper that will be clamped -->
            <div class="content overflow-hidden transition-[max-height] duration-500 ease-in-out" 
                 data-clamp-content
                 style="max-height: 6rem;">  <!-- <-- initial clamp height; change if needed -->
              <p class="text-gray-700 leading-relaxed">
                The architecture of global capital and the world economy remain subordinate to
                movements in the US economy. Global markets are vulnerable to uncertainty and exposed to sudden
                fluctuations. The goal is to track data and stay ahead of the unknown.
                <br><br>
                Rising unemployment, persistent inflation and weak productivity could lead to stagflation. A structural
                recession and the resulting transfer of risk to the global economy would be immediate, affecting
                everything from commodities and equities to capital flows.
                <br><br>
                The Atlas composite score offers a simple, transparent rounded measure of systemic risk to quantify potential
                threats. Atlas tracks macro and micro market indicators. Each indicator is checked against its own pre-defined
                stress thresholds and assigned an individual risk score. The system then sums all individual scores to create
                the final composite score. The final score maps directly to one of four risk postures to guide your
                portfolio's tactical defense.
                <br><br>
              </p>
            </div>
          
            <!-- gradient fade at bottom when collapsed -->
            <div aria-hidden="true" class="pointer-events-none absolute left-0 right-0 bottom-12 h-12 bg-gradient-to-t from-white to-transparent transition-opacity duration-300" data-clamp-fade></div>
          
            <!-- toggle button -->
            <div class="mt-4 flex justify-end">
              <button type="button"
                      class="inline-flex items-center px-4 py-2 border border-gray-200 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                      data-clamp-toggle
                      aria-expanded="false"
                      aria-controls="">
                <span data-clamp-label>Read more</span>
                <!-- chevron -->
                <svg data-clamp-icon class="ml-2 h-4 w-4 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>
          </div>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <section class="lg:col-span-2">

                <div class="bg-white rounded-xl shadow px-5 py-4 relative isolate-z">
                    <div class="flex items-start justify-between">
                        <h2 class="text-lg font-medium">Macro panel</h2>
                        <div id="lastUpdated" class="text-sm text-gray-500"></div>
                    </div>
                    <div class="mt-4">
                        <table class="min-w-full table-fixed">
                            <thead class="sticky-header">
                                <tr class="text-left">
                                    <th class="w-1/3 px-3 py-2 text-sm font-medium">Category</th>
                                    <th class="w-24 px-3 py-2 text-sm font-medium">Status</th>
                                    <th class="px-3 py-2 text-sm font-medium">Latest reading</th>
                                </tr>
                            </thead>
                            <tbody id="macroTable" class="divide-y"></tbody>
                        </table>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow px-5 py-4 mt-6 relative isolate-z">
                    <div class="flex items-center justify-between">
                        <h2 class="text-lg font-medium">Micro panel (early-warning)</h2>
                        <div class="text-sm text-gray-500">Each micro trigger = 0.5 macro</div>
                    </div>
                    <div class="mt-4">
                        <table class="min-w-full table-fixed">
                            <thead class="sticky-header">
                                <tr class="text-left">
                                    <th class="w-1/3 px-3 py-2 text-sm font-medium">Indicator</th>
                                    <th class="w-24 px-3 py-2 text-sm font-medium">Status</th>
                                    <th class="px-3 py-2 text-sm font-medium">Latest reading</th>
                                </tr>
                            </thead>
                            <tbody id="microTable" class="divide-y"></tbody>
                        </table>
                    </div>
                </div>

            </section>

            <aside class="space-y-6">

                <div class="bg-white rounded-xl shadow px-5 py-4">
                    <h3 class="text-lg font-medium">Analysis</h3>
                    <p class="mt-3 text-sm text-gray-700 italic-clamp-3" id="narrativeSummaryText">
                        ...
                    </p>
                    <div class="mt-3 text-right">
                        <a href="narrative.html" class="text-indigo-600 hover:text-indigo-800 text-xs font-semibold">
                            Read analysis
                        </a>
                    </div>
                    <div class="mt-1 text-right">
                        <a href="archive.html" class="text-indigo-600 hover:text-indigo-800 text-xs font-semibold">
                            View Archive
                        </a>
                    </div>
                    <div class="mt-1 text-right">
                        <a href="narrative.html#news-feed"
                            class="text-indigo-600 hover:text-indigo-800 text-xs font-semibold">
                            View news feed
                        </a>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow px-5 py-4">
                    <h3 class="text-lg font-medium">Atlas rating legend</h3>
                    <div class="[Your outer card class here]">
                        <ul id="ratingLegend" class="mt-3 space-y-3 text-sm list-none">
                            <li class="flex items-center text-gray-700">
                                <span class="inline-block w-3 h-3 mr-2 rounded-full bg-blue-800"></span>
                                FULL STORM >12.0 Score (Extreme Risk)
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="inline-block w-3 h-3 mr-2 rounded-full bg-red-600"></span>
                                SEVERE RISK >8.0 Score (High Risk)
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="inline-block w-3 h-3 mr-2 rounded-full bg-amber-500"></span>
                                ELEVATED RISK >4.0 Score (Moderate Risk)
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="inline-block w-3 h-3 mr-2 rounded-full bg-green-600"></span>
                                MONITOR 4.0 Score (Low Risk)
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow px-5 py-4">
                    <h3 class="text-lg font-medium">Composite score summary</h3>
                    <div class="mt-3 space-y-3 text-sm">
                        <div id="triggerSummary" class="text-gray-700 font-semibold"></div>
                        <div id="triggerDetails" class="text-sm text-gray-500"></div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow px-5 py-4">
                    <h3 class="text-lg font-medium">Short insight</h3>
                    <ul id="insightList" class="mt-3 list-disc pl-5 text-sm space-y-2 text-gray-700"></ul>
                </div>

                <div class="bg-white rounded-xl shadow px-5 py-4">
                    <h3 class="text-lg font-medium">Immediate actions</h3>
                    <ul id="actionList" class="mt-3 list-disc pl-5 text-sm space-y-2 text-gray-700"></ul>
                </div>

                <div class="bg-white rounded-xl shadow px-5 py-4">
                    <h3 class="text-lg font-medium">Escalation watch</h3>
                    <ul id="watchList" class="mt-3 list-disc pl-5 text-sm space-y-2 text-gray-700"></ul>
                </div>
            </aside>

        </main>

        <footer class="mt-8 text-sm text-gray-500">
            <div class="mt-2">Version: Atlas v2 — Last update: <span id="footerDate"></span></div>
        </footer>

    </div>



    <nav class="fixed bottom-0 w-full z-50 bg-white shadow-top">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-12 text-xs text-gray-500">
                <div class="hidden sm:block">
                    Disclaimer: Not financial advice. Data for informational purposes only.
                </div>
                <div class="flex items-center space-x-4">
                    <button id="copyShareLink"
                        class="text-indigo-600 hover:text-indigo-800 font-medium transition duration-150 ease-in-out flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.684 13.342C8.886 12.935 9 12.49 9 12c0-.51-.114-.955-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l-3 3m3-3l3-3m-9 3a3 3 0 110-2.684m0 2.684l-3-3m3 3l3-3m9-2c0 .51-.114.955-.316 1.342m0-2.684a3 3 0 100 2.684m0 2.684l-3 3m3-3l3-3m-9-2a3 3 0 100 2.684m0-2.684a3 3 0 110 2.684m0 2.684l-3 3m3-3l3-3" />
                        </svg>
                        Copy share link
                    </button>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=YOUR_URL_GOES_HERE" target="_blank"
                        class="hover:text-gray-800 hidden md:block">Facebook</a>
                    <a href="https://twitter.com/intent/tweet?url=YOUR_URL_GOES_HERE" target="_blank"
                        class="hover:text-gray-800 hidden md:block">Twitter</a>
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=YOUR_URL_GOES_HERE" target="_blank"
                        class="hover:text-gray-800 hidden md:block">LinkedIn</a>
                </div>
            </div>
        </div>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const copyButton = document.getElementById('copyShareLink');
            if (copyButton) {
                copyButton.addEventListener('click', async () => {
                    const shareUrl = window.location.href; // Gets the full current URL
                    try {
                        // Use the modern clipboard API
                        await navigator.clipboard.writeText(shareUrl);
                        // Give the user visual feedback
                        const originalText = copyButton.innerHTML;
                        copyButton.innerHTML = '<span class="text-green-600">Copied!</span>';
                        // Revert the button text after a short delay
                        setTimeout(() => {
                            copyButton.innerHTML = originalText;
                        }, 2000);
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                        // Fallback method for older browsers (less reliable)
                        prompt('Copy this link:', shareUrl);
                    }
                });
            }
        });
    </script>
    <script src="scripts/atlas.js" defer></script>

    <script>
        (function () {
          const CLAMP_PX = 9 * 16; // clamp height in pixels (9rem * 16px default root). Change as needed.
          // Initialize all clamp components on the page
          document.querySelectorAll('[data-clamp]').forEach((root, idx) => {
            const content = root.querySelector('[data-clamp-content]');
            const btn = root.querySelector('[data-clamp-toggle]');
            const label = root.querySelector('[data-clamp-label]');
            const icon = root.querySelector('[data-clamp-icon]');
            const fade = root.querySelector('[data-clamp-fade]');
      
            if (!content || !btn) return;
      
            // Accessibility: link button to content
            const contentId = `clamp-content-${idx}`;
            content.id = contentId;
            btn.setAttribute('aria-controls', contentId);
      
            // Initial collapsed state
            let expanded = false;
      
            // Utility to update UI after measuring heights
            function update() {
              const fullHeight = content.scrollHeight;
              if (!expanded) {
                // If content fits inside clamp, hide the toggle and fade
                if (fullHeight <= CLAMP_PX) {
                  content.style.maxHeight = fullHeight + 'px';
                  btn.style.display = 'none';
                  if (fade) fade.style.opacity = 0;
                } else {
                  content.style.maxHeight = CLAMP_PX + 'px';
                  btn.style.display = ''; // show
                  if (fade) fade.style.opacity = 1;
                }
                btn.setAttribute('aria-expanded', 'false');
                label.textContent = 'Read more';
                icon.style.transform = 'rotate(0deg)';
              } else {
                // expanded: animate to full height (set pixel height so transition works)
                content.style.maxHeight = fullHeight + 'px';
                btn.setAttribute('aria-expanded', 'true');
                label.textContent = 'Show less';
                icon.style.transform = 'rotate(180deg)';
                if (fade) fade.style.opacity = 0;
              }
            }
      
            // Toggle handler
            btn.addEventListener('click', (e) => {
              expanded = !expanded;
              update();
      
              // After expanding, remove max-height constraint so if content grows later it's natural.
              if (expanded) {
                // wait for transition to finish, then set maxHeight to none (so it can grow)
                const onTransitionEnd = () => {
                  content.style.maxHeight = 'none';
                  content.removeEventListener('transitionend', onTransitionEnd);
                };
                content.addEventListener('transitionend', onTransitionEnd);
              } else {
                // collapsing: set explicit clamp height to allow animation
                // small tick to ensure style applied
                requestAnimationFrame(() => {
                  content.style.maxHeight = CLAMP_PX + 'px';
                });
              }
            });
      
            // Re-evaluate on load and window resize
            window.addEventListener('load', update);
            window.addEventListener('resize', () => {
              // reset max-height to none briefly to get accurate scrollHeight, then call update
              content.style.maxHeight = 'none';
              // delay a tick so browser recalculates
              setTimeout(update, 50);
            });
      
            // initial update
            update();
          });
        })();
      </script>

</body>

</html>